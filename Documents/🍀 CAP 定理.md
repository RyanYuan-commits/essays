### 1 CAP 定理
CAP 定理（又称 Brewer 定理）是分布式系统中的一个基本理论，它描述了分布式系统在设计和实现时三种核心属性之间的权衡。

CAP 代表以下三个特性：
	C (Consistency, 一致性)：所有节点在同一时刻对同一数据的值一致。换句话说，任意客户端读取到的数据都是最新的数据。
	A (Availability, 可用性)：每个请求都能在合理的时间内获得响应，不保证返回的值是最新的，但服务必须可用。
	P (Partition Tolerance, 分区容错性)：系统能容忍网络分区，即在网络中断或消息丢失的情况下，系统仍能继续工作。

### 2 CAP 定理的核心观点
在分布式系统中，不可能同时完全满足 **一致性 (C)**、**可用性 (A)** 和 **分区容错性 (P)**，必须在三者之间做出权衡。

由于网络分区（P）在分布式系统中是不可避免的，设计者通常需要在一致性和可用性之间做出选择：
- CA（一致性 + 可用性）牺牲分区容错性；系统在网络分区时停止工作，不能接受请求，实现难度高，适用于网络可靠性极高的场景。
- CP（一致性 + 分区容错性）牺牲可用性；系统在网络分区时，会优先保证数据的一致性，即牺牲部分可用性，例如：Zookeeper。
- AP（可用性 + 分区容错性）牺牲一致性；系统在网络分区时，允许读取到不一致的数据，但服务仍然可用，例如：Redis、Cassandra。

### 3 CAP 定理的实际意义
1. 分布式系统中的现实约束：分布式系统几乎无法避免网络分区（如网络延迟、节点宕机），因此 P 是必须满足的。开发者需要在 **一致性 (C)** 和 **可用性 (A)** 之间权衡。
2. 弱一致性模型：很多系统选择弱化一致性，采用 最终一致性（Eventual Consistency）的模型来提高系统的可用性。

### 4 CAP 定理的补充：BASE 理论
由于 CAP 定理的限制，许多分布式系统采用 **BASE 理论**（Basically Available, Soft-state, Eventually consistent）作为设计准则：
- 基本可用（Basically Available）： 系统在故障时允许部分功能不可用，但核心功能仍需保持。
- 软状态（Soft-state）： 系统中的状态可以有一段时间的不一致。
- 最终一致性（Eventually consistent）： 在没有新的更新操作的情况下，系统会在有限时间内最终达到一致状态。
BASE 是 CAP 定理中 **可用性** 和 **一致性** 权衡的典型例子，更适用于大规模分布式系统。