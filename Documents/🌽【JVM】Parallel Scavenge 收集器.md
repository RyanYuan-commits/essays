## 1 关注吞吐量的收集器
Parallel Scavenge 收集器的独特之处在于是它的关注点与其他收集器不同：
- CMS等收集器的关注点是尽可能地缩短垃圾收集时用户线程的停顿时间
- 而 Parallel Scavenge 收集器的目标则是达到一个可控制的吞吐量(Throughput)。
所谓吞吐量就是处理器用于运行用户代码的时间与处理器总消耗时间的比值。
$$吞吐量 = \frac{运行用户代码的时间}{运行用户代码的时间 + 运行垃圾收集的时间}$$
如果虚拟机完成某个任务，用户代码加上垃圾收集总共耗费了 100 分钟，其中垃圾收集花掉 1 分钟，那吞吐量就是 99%。
停顿时间越短就越适合需要与用户交互或需要保证服务响应质量的程序，良好的响应速度能提升用户体验;
而高吞吐量则可以最高效率地利用处理器资源，尽快完成程序的运算任务，主要适合在后台运算而不需要太多交互的分析任务。
Parallel Scavenge 收集器提供了两个参数用于精确控制吞吐量，
- `-XX:MaxGCPauseMillis` 控制最大垃圾收集停顿时间，是一个大于 0 的毫秒数，收集器将尽力保证内存回收花费的时间不超过用户设定值。垃圾收集停顿时间缩短是以牺牲吞吐量和新生代空间为代价换取的，系统把新生代调得小一些，收集 300MB 新生代肯定比收集 500MB 快，但这也直接导致垃圾收集发生得更频繁，原来 10 秒收集一次、每次停顿 100 毫秒，现在变成 5 秒收集一次、每次停顿 70 毫秒。停顿时间的确在下降，但吞吐量也降下来了。
- `-XX:GCTimeRatio` 直接设置吞吐量大小，是一个大于 0 小于 100 的整数它代表运行用户代码的时间与垃圾收集时间的比率。譬如把此参数设置为 19，那允许的最大垃圾收集时间就占总时间的 5% (即1 / (1 + 19))，默认值为99，即允许最大 1% (即 1/(1 + 99))的垃圾收集时间。
由于与吞吐量关系密切，Parallel Scavenge收集器也经常被称作“吞吐量优先收集器”。
## 2 自适应的调节策略
除上述两个参数之外，Parallel Scavenge 收集器还有一个参数` -XX:+UseAdaptiveSizePolicy` 值得关注。
这是一个开关参数，当这个参数被激活之后，就不需要人工指定新生代的大小（-Xmn）、Eden 与 Survivor 区的比例(XX:SurvivorRatio)，虚拟机会根据当前系统的运行情况收集性能监控信息，动态调整这些参数以提供最合适的停顿时间或者最大的吞吐量。这种调节方式称为垃圾收集的自适应的调节策略。
如果对于收集器运作不太了解，手工优化存在困难的话，使用Parallel Scavenge 收集器配合自适应调节策略，把内存管理的调优任务交给虚拟机去完
成也许是一个很不错的选择。只需要把基本的内存数据设置好(如-Xmx设置最大堆)，然后使用 `-XX:MaxGCPauseMillis` 参数(更关注最大停顿时间)或 
`-XX:GCTimeRatio`(更关注吞吐量)参数给虚拟机设立一个优化目标，那具体细节参数的调节工作就由虚拟机完成了。
自适应调节策略也是 Parallel Scavenge 收集器区别于 ParNew 收集器的一个重要特性。
